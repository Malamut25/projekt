<app-navbar></app-navbar>
<div class="create-quiz-container">
  <h2>√öj kv√≠z l√©trehoz√°sa</h2>
  <div class="form-group">
    <label for="quiz-title">Kv√≠z c√≠me</label>
    <input id="quiz-title" [(ngModel)]="newQuiz.title" placeholder="Kv√≠z c√≠me" class="form-control">
  </div>
  <div class="image-upload-container">
    <label for="quiz-image">
      <span>üì∏ K√©p felt√∂lt√©se</span>
      <input type="file" id="quiz-image" (change)="onFileSelected($event)" accept="image/*">
    </label>
    <img *ngIf="imagePreview" [src]="imagePreview" alt="El≈ën√©zet" class="image-preview">
  </div>
  
  
  <div class="form-group">
    <label for="quiz-description">Le√≠r√°s</label>
    <textarea id="quiz-description" [(ngModel)]="newQuiz.description" placeholder="Kv√≠z le√≠r√°sa" class="form-control"></textarea>
  </div>

  <div class="form-group">
    <label for="quiz-language">Programoz√°si nyelv</label>
    <select id="quiz-language" [(ngModel)]="newQuiz.language_id" class="form-control">
      <option *ngFor="let lang of languages" [value]="lang.id">{{ lang.name }}</option>
    </select>
  </div>

  <div class="form-group">
    <h2>K√©rd√©s {{currentQuestionIndex + 1}}</h2>
    <label for="question">K√©rd√©s</label>
    <textarea id="question" [(ngModel)]="newQuiz.questions[currentQuestionIndex].question" placeholder="√çrj be egy k√©rd√©s" class="form-control" required></textarea>
  </div>
  

  


  <div *ngFor="let answer of [0, 1, 2, 3]; let i = index" class="answer-container">
  <div class="form-group">
    <label for="answer-{{currentQuestionIndex}}-{{i}}">V√°lasz {{ i + 1 }}</label>
    <input id="answer-{{currentQuestionIndex}}-{{i}}" 
           [ngModel]="getAnswerField(newQuiz.questions[currentQuestionIndex], i)" 
           (ngModelChange)="setAnswerField(newQuiz.questions[currentQuestionIndex], i, $event)" 
           placeholder="V√°lasz {{ i + 1 }}" 
           class="form-control">
  </div>
  <div class="form-check">
    <input type="radio" 
           name="correct-answer-{{currentQuestionIndex}}" 
           [checked]="newQuiz.questions[currentQuestionIndex].helyes_valasz === i" 
           (change)="setCorrectAnswer(i)" 
           class="form-check-input" 
           id="correct-{{currentQuestionIndex}}-{{i}}">
    <label class="form-check-label" for="correct-{{currentQuestionIndex}}-{{i}}">Helyes v√°lasz</label>
  </div>
</div>

  <!-- Hibajelz√©s -->
  <div *ngIf="showError" class="error-message">
    A v√°laszok nem lehetnek ism√©tl≈ëd≈ëek! K√©rj√ºk, ellen≈ërizze a v√°laszokat.
  </div>

  <div class="navigation-buttons">
    <button (click)="previousQuestion()" class="btn btn-secondary" [disabled]="currentQuestionIndex === 0">El≈ëz≈ë</button>
    <button (click)="nextQuestion()" class="btn btn-primary" [disabled]="!isCurrentQuestionValid()">K√∂vetkez≈ë</button>
  </div>

  <div class="button-group">
    <button (click)="saveQuiz()" class="btn btn-success" [disabled]="!isQuizValid()">Kv√≠z Ment√©se</button>
  </div>
</div>